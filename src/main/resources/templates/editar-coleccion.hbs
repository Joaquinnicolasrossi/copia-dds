{{#partial "contenido"}}
    <div class="form-container coleccion-form">
            <h1>Editar colecci√≥n</h1>

            {{#if coleccion}}
                <form class="hecho-form" id="coleccionForm" action="/colecciones/{{coleccion.id}}/actualizar" method="post">
                        <label for="titulo">T√≠tulo:</label>
                        <input type="text" id="titulo" name="titulo" value="{{coleccion.titulo}}" placeholder="Ingrese un titulo para la colecci√≥n" required>
                        <label for="descripcion">Descripci√≥n:</label>
                        <textarea id="descripcion" name="descripcion" placeholder="Ingrese una descripci√≥n" required>{{coleccion.descripcion}}</textarea><br>
                        <label>Tipo de fuente</label>
                        <div class="radio-group">
                            {{#each fuentes}}
                                <label>
                                    <input type="radio" name="tipoFuente" value="{{id}}" {{checked}}>
                                    {{nombre}}
                                </label>
                            {{/each}}
                        </div>
                    <hr><br>
                        <label for="categoria">Categoria (Opcional)</label>
                        <input type="text" id="categoria" name="categoria" placeholder="Ej: Incendio forestal..">
                        <label for="fechaDesde">Fecha desde:</label>
                        <input type="date" id="fechaDesde" name="fechaDesde">
                        <label for="fechaHasta">Fecha hasta:</label>
                        <input type="date" id="fechaHasta" name="fechaHasta">
                        <div id="errorFecha" class="error_validacion_fechas"></div>
                    <hr><br>
                        <label>Algoritmo de consenso:</label>
                        <select name="algoritmoConsenso">
                            {{#each algoritmosConsenso}}
                                <option value="{{id}}" {{selected}}>{{nombre}}</option>
                            {{/each}}
                        </select>
                    <div class="form-acciones">
                        <button type="submit">üíæ Guardar</button>
                        <button type="button" class="eliminar-solicitud-btn" onclick="window.location.href='/colecciones'">‚ùå Cancelar</button>
                    </div>
                </form>
            {{else}}
                <p class="sin-colec">No se encontr√≥ la colecci√≥n.</p>
            {{/if}}
        </div>
    <script>
        document.getElementById('coleccionForm').addEventListener('submit', function(e) {
            const fechaDesde = document.getElementById('fechaInicio').value;
            const fechaHasta = document.getElementById('fechaFin').value;
            const errorMsg = document.getElementById('errorFecha');

            if (fechaDesde && fechaHasta && new Date(fechaDesde) > new Date(fechaHasta)) {
                e.preventDefault();
                errorMsg.textContent = "La fecha 'desde' no puede ser posterior a la fecha 'hasta'.";
                errorMsg.style.display = 'block';
            } else {
                errorMsg.style.display = 'none';
            }
        });

        document.getElementById('coleccionForm').addEventListener('submit', function(e) {
            const fechaDesde = document.getElementById('fechaInicio').value;
            const fechaHasta = document.getElementById('fechaFin').value;
            const errorMsg = document.getElementById('errorFecha');

            // limpiar mensaje anterior
            errorMsg.style.display = 'none';
            errorMsg.textContent = '';

            if (fechaDesde && fechaHasta && new Date(fechaDesde) > new Date(fechaHasta)) {
                e.preventDefault();
                errorMsg.textContent = "La fecha 'desde' no puede ser posterior a la fecha 'hasta'.";
                errorMsg.style.display = 'block';
            }
        });
    </script>
{{/partial}}

{{> templates/layout-administrador}}